<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <title>Ø§Ø®ØªØ¨Ø§Ø± Ø§ØªØµØ§Ù„ Supabase</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body style="font-family: Arial; padding: 20px; background: #f5f5f5;">
    <h1>ğŸ”§ Ø§Ø®ØªØ¨Ø§Ø± Ø§ØªØµØ§Ù„ Ù…ÙˆÙ‚Ø¹ Ù…ÙƒØªØ¨Ø© Ø§Ù„Ù…ÙˆØ¯Ø§Øª</h1>
    
    <div id="status" style="padding: 20px; background: white; border-radius: 10px; margin: 20px 0; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
        <h3>Ø¬Ø§Ø±ÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„...</h3>
    </div>
    
    <div id="actions" style="display: none; margin: 20px 0;">
        <button onclick="testInsertMod()" style="padding: 10px 20px; margin: 5px;">Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ¯ ØªØ¬Ø±ÙŠØ¨ÙŠ</button>
        <button onclick="testGetMods()" style="padding: 10px 20px; margin: 5px;">Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆØ¯Ø§Øª</button>
        <button onclick="testInsertVersion()" style="padding: 10px 20px; margin: 5px;">Ø¥Ø¶Ø§ÙØ© Ø¥ØµØ¯Ø§Ø± ØªØ¬Ø±ÙŠØ¨ÙŠ</button>
        <button onclick="testGetVersions()" style="padding: 10px 20px; margin: 5px;">Ø¹Ø±Ø¶ Ø§Ù„Ø¥ØµØ¯Ø§Ø±Ø§Øª</button>
    </div>
    
    <div id="results" style="padding: 20px; background: white; border-radius: 10px; margin-top: 20px;"></div>
    
    <script>
        const supabaseUrl = 'https://zpsbdkcvdpjzahhvdlvd.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inpwc2Jka2N2ZHBqemFoaHZkbHZkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU1MjI1NTIsImV4cCI6MjA4MTA5ODU1Mn0.r_wsZ3mfaA85Ae6zcGu3Xy61yknt1AyAw5sRpH1tdVA';
        
        const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);
        
        async function testConnection() {
            try {
                // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù…Ø­Ø§ÙˆÙ„Ø© Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…ÙˆØ¯Ø§Øª
                const { data, error } = await supabase
                    .from('mods')
                    .select('count');
                
                document.getElementById('status').innerHTML = `
                    <h3 style="color: green;">âœ… ØªÙ… Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù†Ø¬Ø§Ø­ Ø¨Ù€ Supabase!</h3>
                    <p><strong>Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø´Ø±ÙˆØ¹:</strong> ${supabaseUrl}</p>
                    <p><strong>Ø§Ù„Ø­Ø§Ù„Ø©:</strong> Ø§ØªØµØ§Ù„ Ù†Ø§Ø¬Ø­</p>
                    <p><strong>Ù…Ù„Ø§Ø­Ø¸Ø©:</strong> ÙŠÙ…ÙƒÙ† Ø§Ù„Ø¢Ù† Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ</p>
                `;
                
                document.getElementById('actions').style.display = 'block';
                
            } catch (error) {
                document.getElementById('status').innerHTML = `
                    <h3 style="color: red;">âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„</h3>
                    <p><strong>Ø§Ù„Ø®Ø·Ø£:</strong> ${error.message}</p>
                    <p><strong>ØªØ£ÙƒØ¯ Ù…Ù†:</strong></p>
                    <ol>
                        <li>Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ ÙÙŠ SQL Editor</li>
                        <li>ØªØ´ØºÙŠÙ„ ÙƒÙˆØ¯ SQL Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„</li>
                        <li>Ø§ØªØµØ§Ù„ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª</li>
                    </ol>
                    <p><a href="https://supabase.com/dashboard/project/zpsbdkcvdpjzahhvdlvd/editor" target="_blank">
                        ğŸ”— Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ SQL Editor
                    </a></p>
                `;
            }
        }
        
        async function testInsertMod() {
            const newMod = {
                title: 'Ù…ÙˆØ¯ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± ' + new Date().getTime(),
                description: 'Ù‡Ø°Ø§ Ù…ÙˆØ¯ ØªØ¬Ø±ÙŠØ¨ÙŠ Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±',
                image_url: 'https://via.placeholder.com/400x200/2d5ba9/ffffff?text=Test+Mod',
                download_url: 'https://example.com/test-mod.zip',
                category: 'Ø§Ø®ØªØ¨Ø§Ø±',
                version: '1.20.1'
            };
            
            const { data, error } = await supabase
                .from('mods')
                .insert([newMod])
                .select();
            
            if (error) {
                document.getElementById('results').innerHTML = 
                    `<p style="color: red;">âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¥Ø¶Ø§ÙØ©: ${error.message}</p>`;
            } else {
                document.getElementById('results').innerHTML = 
                    `<p style="color: green;">âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ÙˆØ¯ Ø¨Ù†Ø¬Ø§Ø­!</p>
                     <p><strong>ID:</strong> ${data[0].id}</p>
                     <p><strong>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</strong> ${data[0].title}</p>`;
            }
        }
        
        async function testGetMods() {
            const { data, error } = await supabase
                .from('mods')
                .select('*')
                .order('created_at', { ascending: false });
            
            if (error) {
                document.getElementById('results').innerHTML = 
                    `<p style="color: red;">âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: ${error.message}</p>`;
            } else {
                document.getElementById('results').innerHTML = 
                    `<h4>Ø¹Ø¯Ø¯ Ø§Ù„Ù…ÙˆØ¯Ø§Øª: ${data.length}</h4>
                     <ul>
                        ${data.map(mod => `<li>${mod.title} - ${mod.category} (${mod.id})</li>`).join('')}
                     </ul>`;
            }
        }
        
        async function testInsertVersion() {
            const newVersion = {
                title: 'Ù…Ø§ÙŠÙ†ÙƒØ±Ø§ÙØª Ø§Ù„Ø¨ÙŠØ¯Ø±ÙˆÙƒ ' + new Date().getTime(),
                description: 'Ø¥ØµØ¯Ø§Ø± ØªØ¬Ø±ÙŠØ¨ÙŠ Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±',
                image_url: 'https://via.placeholder.com/400x200/50a351/ffffff?text=Test+Version',
                download_url: 'https://example.com/minecraft-test.apk',
                version: '1.20.1'
            };
            
            const { data, error } = await supabase
                .from('versions')
                .insert([newVersion])
                .select();
            
            if (error) {
                document.getElementById('results').innerHTML = 
                    `<p style="color: red;">âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¥Ø¶Ø§ÙØ©: ${error.message}</p>`;
            } else {
                document.getElementById('results').innerHTML = 
                    `<p style="color: green;">âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø¨Ù†Ø¬Ø§Ø­!</p>
                     <p><strong>ID:</strong> ${data[0].id}</p>
                     <p><strong>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</strong> ${data[0].title}</p>`;
            }
        }
        
        async function testGetVersions() {
            const { data, error } = await supabase
                .from('versions')
                .select('*')
                .order('created_at', { ascending: false });
            
            if (error) {
                document.getElementById('results').innerHTML = 
                    `<p style="color: red;">âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: ${error.message}</p>`;
            } else {
                document.getElementById('results').innerHTML = 
                    `<h4>Ø¹Ø¯Ø¯ Ø§Ù„Ø¥ØµØ¯Ø§Ø±Ø§Øª: ${data.length}</h4>
                     <ul>
                        ${data.map(version => `<li>${version.title} - ${version.version} (${version.id})</li>`).join('')}
                     </ul>`;
            }
        }
        
        // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
        window.addEventListener('load', testConnection);
    </script>
</body>
  </html>
